import { Fonts } from "./fonts";
const pdfMake = require("pdfmake/build/pdfmake.js");
// const pdfFonts = require("pdfmake/build/vfs_fonts.js");
// pdfMake.vfs = pdfFonts.pdfMake.vfs;

let pdfFonts = {
  //   Roboto: {
  //     normal: "https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/fonts/Roboto/Roboto-Regular.ttf",
  //     bold: "https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.66/fonts/Roboto/Roboto-Medium.ttf"
  //   },
  Hind: {
    normal: "Hind-Regular.ttf",
    bold: "Hind-Bold.ttf",
  },
  en_IN: {
    normal: "Hind-Regular.ttf",
    bold: "Hind-Bold.ttf",
  },
  pn_IN: {
    normal: "BalooPaaji2-Regular.ttf",
    bold: "BalooPaaji2-Bold.ttf",
  },
  od_IN: {
    normal: "BalooBhaina2-Regular.ttf",
    bold: "BalooBhaina2-Bold.ttf",
  },
  hi_IN: {
    normal: "Hind-Regular.ttf",
    bold: "Hind-Bold.ttf",
  },
};
pdfMake.vfs = Fonts;

pdfMake.fonts = pdfFonts;

const downloadPDFFileUsingBase64 = (receiptPDF, filename) => {
  if (
    window &&
    window.mSewaApp &&
    window.mSewaApp.isMsewaApp &&
    window.mSewaApp.isMsewaApp() &&
    window.mSewaApp.downloadBase64File &&
    window.Digit.Utils.browser.isMobile()
  ) {
    // we are running under webview
    receiptPDF.getBase64((data) => {
      window.mSewaApp.downloadBase64File(data, filename);
    });
  } else {
    // we are running in browser
    receiptPDF.download(filename);
  }
};

function getBase64Image(tenantId) {
  try {
    const img = document.getElementById(`logo-${tenantId}`);
    var canvas = document.createElement("canvas");
    canvas.width = img.width;
    canvas.height = img.height;
    var ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0);
    return canvas.toDataURL("image/png");
  } catch (e) {
    return "";
  }
}

const defaultLogo =
  "data:image/png;base64,/9j/4AAQSkZJRgABAQEASABIAAD/7gAOQWRvYmUAZAAAAAAC/+0ALFBob3Rvc2hvcCAzLjAAOEJJTQPtAAAAAAAQAEgAAAABAAEASAAAAAEAAf/hSK9odHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIgogICAgICAgICAgICB4bWxuczp4bXBHSW1nPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvZy9pbWcvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBJbGx1c3RyYXRvciBDUzYgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDIyLTAzLTA4VDE5OjIyOjQ5KzA1OjMwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMjItMDMtMDhUMTM6NTI6NTJaPC94bXA6TW9kaWZ5RGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAyMi0wMy0wOFQxOToyMjo0OSswNTozMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPHhtcDpUaHVtYm5haWxzPgogICAgICAgICAgICA8cmRmOkFsdD4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDx4bXBHSW1nOndpZHRoPjI1NjwveG1wR0ltZzp3aWR0aD4KICAgICAgICAgICAgICAgICAgPHhtcEdJbWc6aGVpZ2h0PjEyMDwveG1wR0ltZzpoZWlnaHQ+CiAgICAgICAgICAgICAgICAgIDx4bXBHSW1nOmZvcm1hdD5KUEVHPC94bXBHSW1nOmZvcm1hdD4KICAgICAgICAgICAgICAgICAgPHhtcEdJbWc6aW1hZ2U+LzlqLzRBQVFTa1pKUmdBQkFnRUFTQUJJQUFELzdRQXNVR2h2ZEc5emFHOXdJRE11TUFBNFFrbE5BKzBBQUFBQUFCQUFTQUFBQUFFQSYjeEE7QVFCSUFBQUFBUUFCLys0QURrRmtiMkpsQUdUQUFBQUFBZi9iQUlRQUJnUUVCQVVFQmdVRkJna0dCUVlKQ3dnR0JnZ0xEQW9LQ3dvSyYjeEE7REJBTURBd01EQXdRREE0UEVBOE9EQk1URkJRVEV4d2JHeHNjSHg4Zkh4OGZIeDhmSHdFSEJ3Y05EQTBZRUJBWUdoVVJGUm9mSHg4ZiYjeEE7SHg4Zkh4OGZIeDhmSHg4Zkh4OGZIeDhmSHg4Zkh4OGZIeDhmSHg4Zkh4OGZIeDhmSHg4Zkh4OGZIeDhmLzhBQUVRZ0FlQUVBQXdFUiYjeEE7QUFJUkFRTVJBZi9FQWFJQUFBQUhBUUVCQVFFQUFBQUFBQUFBQUFRRkF3SUdBUUFIQ0FrS0N3RUFBZ0lEQVFFQkFRRUFBQUFBQUFBQSYjeEE7QVFBQ0F3UUZCZ2NJQ1FvTEVBQUNBUU1EQWdRQ0JnY0RCQUlHQW5NQkFnTVJCQUFGSVJJeFFWRUdFMkVpY1lFVU1wR2hCeFd4UWlQQiYjeEE7VXRIaE14Wmk4Q1J5Z3ZFbFF6UlRrcUt5WTNQQ05VUW5rNk96TmhkVVpIVEQwdUlJSm9NSkNoZ1poSlJGUnFTMFZ0TlZLQnJ5NC9QRSYjeEE7MU9UMFpYV0ZsYVcxeGRYbDlXWjJocGFtdHNiVzV2WTNSMWRuZDRlWHA3ZkgxK2YzT0VoWWFIaUltS2k0eU5qbytDazVTVmxwZVltWiYjeEE7cWJuSjJlbjVLanBLV21wNmlwcXF1c3JhNnZvUkFBSUNBUUlEQlFVRUJRWUVDQU1EYlFFQUFoRURCQ0VTTVVFRlVSTmhJZ1p4Z1pFeSYjeEE7b2JId0ZNSFI0U05DRlZKaWN2RXpKRFJEZ2hhU1V5V2lZN0xDQjNQU05lSkVneGRVa3dnSkNoZ1pKalpGR2lka2RGVTM4cU96d3lncCYjeEE7MCtQemhKU2t0TVRVNVBSbGRZV1ZwYlhGMWVYMVJsWm1kb2FXcHJiRzF1YjJSMWRuZDRlWHA3ZkgxK2YzT0VoWWFIaUltS2k0eU5qbyYjeEE7K0RsSldXbDVpWm1wdWNuWjZma3FPa3BhYW5xS21xcTZ5dHJxK3YvYUFBd0RBUUFDRVFNUkFEOEE5VTRxN0ZYWXE3RlhZcTdGWFlxNyYjeEE7RlhZcTdGWFlxN0ZXSC9tTCtaMmcrU0xGWHU2M09wVGdtejA2TWdPNEczTnp2d1N2N1IrZ0hMTWVJeUxPRURKODQrWmZ6bDgvK1labiYjeEE7NTZpK24yalY0MmRpVEFnQjdNNm4xSC8yVFpteHd4RGVJQU1lc1cxUzduTExjeUFwOGN0dzd2UkFEVGt6Q3A2OU8vaGpseVJ4eHN0bSYjeEE7TERMTElSaUxKWlRCK1lQbS9UOVBiVHRQMWk4VzJhZ01ra3JOTFFka0pMZWtQWkQ5SnpRNTlWS1oyOUllbjB2WXVLQXVZNDVmWjh2MSYjeEE7c1l2cnU5dkpETGQzRWx4S2Fubks3TzIvWGRpY3hYYlJoR0lvQ2wrbWE3cm1rVENiUzcrNHNwQWExZ2taQWZtQWFINmNJSkhKcnk0SSYjeEE7WkJVZ0M5bC9Mbi9uSUtXVzRpMHZ6aHdIcUVKRnE2QUlBeE8zMWhCUlFQOEFMVUNuY2Q4eWNlcDZTZWQxL1lsQXl4ZjZYOVQzUldWbCYjeEE7REtRVklxQ053UWN6WG1tOFZkaXJzVmRpcnNWZGlyc1ZkaXJzVmRpcnNWZGlyc1ZkaXJzVmRpcnNWZGlyc1ZkaXJzVmRpcnNWUU91NiYjeEE7elo2TG8xN3ExNGFXdGpDODB0T3BDQ3ZFZTdIWVlZaXpTUUxMNHA4emVZOVQ4eTY5ZGF6cUw4N2k2Y3NGclZZMEgySTAvd0FsQnNNMiYjeEE7a1lpSW9PWUJRZG9XaGF0cldvUmFkcFZxOTNlUy9ZaWpGZHU3TVRzcWp1VHNNWlNBRmxoSXN5dmZLczJqSWRNdkpVZ1MwZjhBM0pYSyYjeEE7L0dIdWlBVEZFQnhNaGlSZ3RLMERjanlBYk5CcmMvSFB5RDFIWStJUXg4VlhPZjNkTDd2eDNJQlo3WU42V202Y0paYWJUVGd6eWY2dyYjeEE7akZJZ1BZcTFQSE1KMjBvSG5PVmU3Yjl2MmhMNzk3aHhTWVFEd0VLUXFkai9BTVVqOWVMS0VSMHY3ZjBwYTZZczFCMHhRK2kvK2NlZiYjeEE7UEZ4cW1reitYTDZReVhPbElyMmJzYXMxcVR4NGY4OG1vQjdFRHRtYnBzbCtrdkk5dWFNUW1Na2VVdWZ2L2E5ZnpLZEM3RlhZcTdGWCYjeEE7WXE3RlhZcTdGWFlxN0ZYWXE3RlhZcTdGWFlxN0ZYWXE3RlhZcTdGWFlxN0ZYWXE4di81eU52NWJYOHQzaGpiaUwyOGd0NU42VlVjcCYjeEE7cWZmRU12MHc5VFppRzc1WmpYTmc1SmVzL2tENXkwTHk3cjE1YTZ0d2dYVkVqamgxQitrVFJsandjL3NwSnkzUGlCWHhHTnFJRWpabyYjeEE7eUMyL050MCt2K2FOVHU1NjIybDJjc2hDMG9Wak1ob0ZVOVpKblBMNW5mNFJ0ejB6WkwzT2pnTU9HSUc4NUFmZDl3L0c3RmJ5Nk1vOSYjeEE7S0pCRGFnL0JDdS8wdTIzTnZjL1JRYlpCem80NjNPNVdRNk5mWEVQMWdJSXJXcEgxbVlpT01rZFFyTlRrUi9LdFQ3WlBIaWxNMUVXNCYjeEE7K3AxdUxEOWNxKy81TWwwbjhvUE1PdWFVMnBhTGUyR29Sb3hSNElwWkVsRGdWNGtTeHhxRHVQMnN0bnBKeDV1dEhiK25KcjFlK3YyMiYjeEE7d2Evc0xxeXU1ck83aWFHNXQzYU9hSmhSbGRUUWcvVG1NN2lFeElBamNGbXY1RVhNc0g1bTZiR2hvdDFIY3hTanhVUVBML3hLTVpkZyYjeEE7K3NPcjdhaURwcEh1cjc2ZlZHYkY0aDJLdXhWMkt1eFYyS3V4VjJLdXhWMkt1eFYyS3V4VjJLdXhWMkt1eFYyS3V4VjJLdXhWMkt1eCYjeEE7VjViL0FNNUg2ZkxkZmwwSmtYa3RqZlFYRWg4Rkt2RFgvZ3BobCttUHFiTVIzZkw4YTVudDVLSVJjV3NsUExMekZxa05yOVRkeGMyWCYjeEE7SldOdE9PYTFRTUZvd282OFE3VTRzT3B6SHlhYUUrWWJjT3N5NGpjSlVpZjA0cEFNV25Xa01ncFNRQ1dUcC9rVFNTeG42VnltT2d4QiYjeEE7eU1uYk9wa0s0cTl3Q2pQZFhsN01KTG1WNTVhQlZMRXNRQnNGWHdBN0FabHhpQUtEcVp5Sk5ubStpL3l0MFErVVBKRXQ1cmJpemFkbSYjeEE7dkxvUy9ENk1mRUtxdC9sVVd0T3U5T3VZT295Qzc2Qm5peHlrUkdJc2w4OWVjZFhUVy9NMnA2ckduQ0s3bmVTSmFVSVN0RXI3OFFLKyYjeEE7K2FXUnNrdm91a3dlRmlqQTh3R1Uva0pwTXQxK1ljRjJvL2Q2ZEJOUEkzYjQwTUFIei9lNVpweDYzWGR1WkJIVGtmemlCK245RDZjeiYjeEE7WXZGT3hWMkt1eFYyS3V4VjJLdXhWMkt1eFYyS3V4VjJLdXhWMkt1eFYyS3V4VjJLdXhWMkt1eFYyS3BmNWcwV3oxelJMM1NMd1Z0NyYjeEE7MkpvWFBVcnlHekQzVTBZZStHTXFOcEJwOGJlWS9MV3ArWE5idWRJMUtQaGMyelU1Q3ZHUlAyWkVKNnF3M0diT01oSVdHKzdRMXJibSYjeEE7YVFSaGxSbTJVdVFxaytISTdENmRzSkxBcG9zRWRyTDZHcTJNcVBRRWNENk1sQ1BoTkhWMVphYjdBVjhjajdtQktZMjhYazhFTkpOcSYjeEE7QkhVeHJGQVBvNW1RL2Z3d2VwZ1Uxc3RRZ2pSMzBHeC9Sc01WUFcxZTVmNnhjb0QwQ1NjWTQ0Mk5QaDlOQS84QWxVcmxXV1lnTGtXMyYjeEE7VDZlZWFZaEFibENhOTV0MXZWYk8yMDJXNFpkS3NrV08xc3hzb1ZCUldlbjIzOFNmb3BtZ3k1VE0yWHZkRjJkajA0OUk5WGV4OFFTUyYjeEE7U0xIR3BlUnlGUkZCSkpKb0FBT3BPVnVjU0FMTDZZL0tIeUkvbFh5OHozaUFhdHFKV1c3SGVOUVAzY1greHFTZmM1bjRNZkNOK1plRiYjeEE7N1cxM2o1UFQ5RWVYNjJkNWU2cDJLdXhWMkt1eFYyS3V4VjJLdXhWMkt1eFYyS3V4VjJLdXhWMkt1eFYyS3V4VjJLdXhWMkt1eFYySyYjeEE7c1o4OC9sNzVmODQyU3c2aWhqdW9RZnF0OUZRU3hrOXQ5bVd2VlQrQjN5eUdReDVKQnA0TjVoL0l6enhwRXJtMHR4cTFtRDhFMXFSeiYjeEE7cDI1UXNlZGY5WGtQZk11T2VKWldsZGpwMzVnNmR4c2wwdStNWWFxMk56WnRQRnlidUlabzNTcDhRdVNKaWVyRWxsM2x6OHVmT2VzeSYjeEE7cTl4b1ZucGNWYXZkM1VMUk4wNkMzRGIvQUV4Z2UrVlR5eEhJMmgydi9scitZczF4UnRPRWxzbTBFZHRKQUlrRktmREducEFFMDNJUSYjeEE7Vk9hYkxHY2paRDJXZzEyanc0eEdNcVBXd2JLSDAvOEFKUHp6ZVNLSjdhS3hpYnJKUEtob1A5V0l5TjlHUUdDUmI4dmJ1bWlOaVplNCYjeEE7ZnJwNnA1SC9BQ20wSHl6SXQ3S2YwaHF3K3pkU0tBc1o3K2ttL0UvNVJOZmxtVGp3Q081NXZPYS90ZkpuOUk5TU83djk3T2N2ZFM3RiYjeEE7WFlxN0ZYWXE3RlhZcTdGWFlxN0ZYWXE3RlhZcTdGWFlxN0ZYWXE3RlhZcTdGWFlxN0ZYWXE3RlhZcTdGWFlxN0ZYWXE3RlhZcTdGWCYjeEE7WXE3RlhZcTdGWFlxN0ZYWXE3RlhZcTdGWFlxN0ZYWXE4cHV2K2NndENqdUpFdDlNdUo0VkpDU2wwVGtCMzQvRlRNa2FZOTdIaVpmNSYjeEE7RjgvYVo1dnRybVMwaGt0NXJObEU4TWxEUVNWNE1HSFVIZ2NxeVl6RklOc255dExzVmVmZWJmemswWHk5ck11ay9VNXJ5NHQ2ZldIUiYjeEE7bFJGWmdHNGdtdGRqdmwwTUJrTFltU3A1Ti9ON1IvTTJycnBTMmsxbmRTcXpRRnlyby9CU3pDb29RZUlKNll6d21JdFJLMlk2enExbiYjeEE7cEdsWFdwM2hZVzFwR1pKT0lxeEE3S050eWRobFVSWnBrOHhiL25JYlNPUjQ2Uk9WcnNUS2dOUGxRNWtmbGozc2VOci9BS0dHMHIvcSYjeEE7enovOGpVLzVweC9MSHZYamQvME1OcFgvQUZaNS93RGthbi9OT1A1WTk2OGFwRC96a0pvWmtBbjBxNVNQdXlQRzU2K0I0ZnJ4L0xIdiYjeEE7WGpaZjVhL01ueWo1aWtFRmxlZWxlTjltMHVCNlVwLzFha3F4OWxKeXFXS1VVZ3BuNXA4d1ErWHRCdTlZbWhlNGp0UWhNVWRBeDV1cyYjeEE7WTNQZ1dxY2pDUEVhVWw1MFArY2h0SnJ2cEU5Ty93QzlUK21YL2xqM280M29QbFR6Ym8vbWZUQmY2YTVLcWVFMERnQ1NOK3ZGd0NmbyYjeEE7STJ5bWNERTBVZ3B6a0V0TXlxcFppRlZSVm1Pd0FIYzRxOHkxYjgrL0xscGZTVzluWnpYMFVaS201VmxSR0lQVksxSlgzMnpJR25KWSYjeEE7OFNhK1IvelZzZk5tcXlhYkJwODF0SkhDMC9xTXl1dEZaVklOS1UrME1qa3c4SXRJbGJOcDU0TGVGNXA1RmloakhLU1Z5RlZRT3BMSCYjeEE7WURLVXZQTmMvUFR5allPMFZnazJweXFhYzRnSTRmZjQzM1AwS1JsOGRQSTgySmt4bTUvNXlIdldKK3E2TkZHTzNxek5KL3hGSThzRyYjeEE7bTgwY2JyYi9BSnlIdlZJK3RhTkZJTy9wVE5IL0FNU1NURTZielhqWk5vZjU2ZVViK1JZYjlKdE1sYmJuS0JKRDdmR254RDZWQXl1VyYjeEE7bmtPU1JKNkhCUEJjUXBQYnlMTkRJQTBjc2JCbFpUMEtzTmlNb1pMOFZVN201dDdXQjdpNWxTR0NJY3BKWkdDcW9IY3NkaGlBcnovViYjeEE7L3dBOC9KbGs3eFdnbjFGMTZQQ2dXTW4vQUZwQ3ArNVRsOGRQSXNUSUpETC9BTTVFd0J2M1doTTYrTFhRVS9jSW15ZjVielJ4clYvNSYjeEE7eUtTbzVhQVF2Y2k3cWY4QWt5TWZ5M212R25Pai9uejVVdTVGajFDQ2ZUbWIvZGpBVFJENXNueC84SmtKYWVRNUpFbm90bmVXbDdheCYjeEE7M1ZuTWx4YlREbEZOR3daR0hzUmxKRk1ueHJ6elp0ZFBhUDhBbkhGcS93Q0lmK2pQL21mbUxxZWpLTDJqTVZrN0ZYeTErYXIwL01IVyYjeEE7aC94Y3YvSnRjMkdMNlF3SVJmNU1EbitZMmxtdjJGdUcrZjhBbzhnL2pnei9BRWxJRDNIODBqVDh2OWFQL0ZBLzRtdVltTDZneUw1WSYjeEE7NTVzR3VtVmVXL3kxODJlWTlOR282WERGSmFsMmo1UEtxSGt0SzdINTVYTEtJbWluaFRYL0FKVWgrWVAvQUN6UWY4ajB5UGp4WGhTaiYjeEE7ekYrVy9uUHkvYUc4MUN3UDFOZnQzRUxMS3FWMitQaVNWSHVSVEpSeXhQSmVGaTZ5c3JCbEpWbE5RUnNRUmxpMCtnL3lsODRONXYwQyYjeEE7OTBMWEtYVnpheGlPVjVOelBieWdyVnZGbHBRbjVkOHc4ME9FMkdRZU8rZS9LbDM1Vjh3VDZkTFY3Yy92TEtjLzdzaFkvQ2Y5WWRHOSYjeEE7OHljYytJV3hJUmY1YWVkMzhyZVlvNTVXSjB5NnBEZnhqZjRDZHBBUEZEdjhxanZneXc0Z2tQcUtPU09XTlpJMkR4dUF5T3BCVmxJcSYjeEE7Q0NPb09hOWs4dS9QRHozK2pOTkhsMnhrcGZYNlZ1MlU3eDJ4cU9Qems2ZjZ0ZkVaa1lNZG0wRjRFR0pJQTNKMkFHWmpHbjB4K1UvayYjeEE7Zi9ET2dDYTdTbXI2Z0ZrdXFqZU5mMklmOWpXcmUveXpBelpPSStUSUI1WCtiMzVoM091YXhOcEZsTHgwYXhrTWRFTzA4cUdqT3hIViYjeEE7UWRsKy9NbkRqb1gxUVdBMmR0ZDN0MUZhV2tUejNNekJJb1l3V1ptUFlBWmNUU0tlazZYK1FYbTI1aFdXOXVyYXhMYitpUzBzaS82MyYjeEE7QWNQdVk1UWRRRThMdFUvSUx6WmJRdkxZM1Z0Zmxla0lMUlNOOHVZNGZlMkkxQVhoZWJYbHRkMlYxTGFYY1R3WE1MRkpZWkFWWldIWSYjeEE7ZzVlRGFLWjcrVVg1aVhPaDZ2RHBON0tXMGEra0NVWTFFTXJtaXV2Z3BPemZmbE9iSFl2cWtQb3htVkZMTVFxcUtzeDJBQTduTUZrKyYjeEE7WmZ6TS9NYTc4MGFvOEZ2SVk5RXRYSXRJQnQ2aEczclA0bHYyZjVSOU5jL0ZqNFI1c1N4WFN0TDFQVnJ4TExUYmFTN3VuM0VVU2xqVCYjeEE7dVQ0QWVKMnl3eUE1b3BtVWY1Si9tR3lCbXM0VUo2bzA4ZFI4K0pJL0hLdkhpdkMxTCtTbjVob3RWc29wVC9LczhRUC9BQXpLTWZIaSYjeEE7dkN3elViRFVOTnZKTExVSUh0YnFJMGtobEJWaDRkZXg3SExRYjVMVE4veWM4N1h1aitaTGJTWGN2cGVxU3JDOEJPeVRTRUxISW5nZSYjeEE7VkZieEh5R1Zab1dMU0htM3FaY3lwN2IvQU00MXRYL0VmL1JsL3dBejh4ZFQwVjdabUtyc1ZmS2Y1c1BUOHhOYkgvRnkvd0RKdE0yRyYjeEE7TDZRdEk3OGtYcitZK21qL0FDTGova3crRFA4QVN0UGMvd0ExalQ4dk5iUC9BQlFQK0pybUppK29LK1VmVXpZTFQ2VC9BQ0ROZklLbiYjeEE7L2w3bS93Q05jd3RSOVN2UnNvVlpOREZQQzhNeUxKREtwU1NOZ0NyS3dvUVFlb0l4VjhkZVpMS0xUZk1XcWFkQ1NZcks4bnQ0eWVwVyYjeEE7S1ZrSDRETm5FMkFWcG5mL0FEajdjdXZubVdOVDhNMWpLcmo1UEd3L0VaVHFCNlZwNjcrWi9raVB6WDVkZUtGUitsYlNzMm51YUNyVSYjeEE7K0tJazlwQUtmT2h6SHhUNFNyNVlsRWtVanhTcVVrakpWMFlFRldCb1FRZTR6UFduc2Y1WWZtL1o2VjVVdmRQMXB5MHVsUkdUVEFUOCYjeEE7VXlFaFJBSy90SzdDbitUN0xtTmx3MmJDYWVUNjFyZDlyT3EzV3FYeitwZFhibVNRNzBGZWlyWG9xallEd3pJakdoU0tla2ZrWjVGLyYjeEE7UzJwbnpGZngxMC9UM3BhSzNTUzVHNFB1c2ZYL0FGcWUrVVo4bENsZTFlZE5ZT2plVTlXMU5XNFMyOXRJWVc4SldIR1AvaDJHWXNCWiYjeEE7QVY4Z0dTcHFldWJKYWU2Zjg0NytYclUyTi81aGxRTmN0S2JPMlk5VVJWVjVDUDhBWExnZlJtTHFaZEZleTVpcTdGWGpYL09SSGw2MSYjeEE7K29XSG1HSkZXNVdiNm5jc05pNk9yUEdUNDhDaEgwNWs2YVc5SzhMRWxEVWRjeTFwOUllWmZOc3N2NUpmcGhKQ2JtOXNvYmQzM3FaSiYjeEE7V1dHZmYvZzh3b3cvZVVsODMrcG1haW4wWitRZWdXOW41UDhBMHVVSDFyVkpYUHFkL1NoWXhxdnk1S3h6QzFFcmxTdlRjb1YyS3NTOCYjeEE7L2ZseHBIbkdDRTNNaldsOWJWRUY1R0F4NG5jbzZtbkphN2pjVSsvTE1lUXhWamZsYjhpTk0wWFhMWFZialU1TDQyYmlhR0QwaEV2cSYjeEE7b2FvekhrNUlVNzB5eWVja1ZTdm03MU16V3ludVAvT01yVi94Si8wWmY5akdZbXA2TVpCN2ptS3hkaXI1TS9OeDZmbVByZy80dVgvayYjeEE7MG1iREQ5SVpnSS84akhyK1pXbWovSXVmK1RENE0vMHFROTMvQURaTlB5NjF3LzhBRkEvNU9MbUppK29NUStTdlV6WXM2ZlJQNUdlWSYjeEE7dEFzZklvZ3Z0VHRMV2Y2MU0zcFR6eHh2UThhSGl6QTB6Q3p4Smt4SWVoZjR4OG8vOVh6VC93RHBLaC81cXluZ1BjaWtoODJmbTU1TiYjeEE7MEhUNUpZdFFnMUcrS242dloyc2l5bG5wOFBOa0xLaStKUDBWeWNNTWlWQWZMRjdmejN0NVBlWERjcDdtUjVwbThYa1lzeCs4NW5nVSYjeEE7enA2ei93QTQ0YVZOUDVpMUxWaWxiZTB0ZlFEbi9mczdxd3A0L0RHMzM1ajZrN1V4aytnOHcyTHdQOC9mSVAxTzUveFhwMGRMYTVZSiYjeEE7cWNhalpKanNzMjNhVG8zK1YvclpsNmZKZXhaQjR6Nm1aVEtrNThvZVc3L3pQNWd0ZEhzdG5uYXNzcDZSeEx1OGgrUSs4N1pDY3VFVyYjeEE7Z2g5ZWFMbzlobzJsV3VsMkNlbmFXaUNPSmVwMjNMTWU3TWR5ZkhOZEkyYkxCaTM1MGx4K1dXdEZPdExldnkrc3hWL0RMTVAxaElmSyYjeEE7ZnFac0dkUHBmL25IeGtieUFlTktpOW1EMDhlS2Rmb3BtRHFQcVlTZWw1UWgyS3ZOUCtjZ25WZklHNW9UZVFCZm5SeityTDlQOVNZdiYjeEE7bWoxTXptZFBZOVY5Yi9vWERTV05kcmtsdjlVM2N3WDZOeG1NUDcwc2VyeHoxTXlXVlBxLzhtelg4dGRFUCtSTi93QlJFbWEvTjlSWSYjeEE7Rm1lVklmT2Y1cmZtVjV4dFBQR29hZnArcFMyTmxaRklvWVlTRnIrN1ZtWmlCVWtzVDhzemNXS1BEWlpnTVEvNVdqNS8vd0NyOWQvOCYjeEE7ak1zOEtQY3RJaXcvTnp6L0FHZDVGYy9wbWVjUnNDME14RHh1TzZzQ08vMzREaGozTFRFZFN0SnRQMUc2c0oxS3pXazBrRXFucUdqWSYjeEE7cVI5NHkwR3cyVTlWL3dDY2NmTWxuWStZZFEwaTVkWTIxV0tNMnpNYWNwYmN0U01lN0xLeEh5ekgxTWJGc0poOUdaaE5hMmFhS0dKNSYjeEE7cG5XT0dOUzhramtLcXFvcVdZbllBREZYeHI1ODE2MzF2empxK3FXMys4MXpjTVlEMHJHdndJMyt5VlFjMmVPTlJBYmhGbG4vQURqNyYjeEE7WlRYWDVpUXpvUDNkamJUelNuMlpmUkgvQUEwb3l2VUgwb255ZTQvbTZhZmx2cngvNWR4L3ljWE1URDlRWVI1dmtUbm15YmFkenhXbiYjeEE7YzhWcHdZa2dEY25ZQVlGcGwzbEg4c1BPWG1hNGpGcll5VzFreEJmVUxsV2poQzEzS2xnQzU5bHJsYzhzWW9KQWZVUGszeWpwdmxUUSYjeEE7WU5Jc0tzcWZIUE93QWFXVnZ0U05UeDZBZGhRWmd6bVpHeTFFMm5lUVFsUG0yM2d1UEsycnd6eHJMRTFuUHlSaFVHa1pJKzRpdVNnZCYjeEE7d2tjM3hYenphTjFQZC84QW5HT0dGazh3WEJSVE9wdG8xa3A4UVJ2VUpVSHdKVVppYXJvd205enpFYTBsODdhSzJ0K1V0VzB0QnltdSYjeEE7cmFSWUIveGFCeWovQU9IQXlVSlVRVWg4WU16S3hWZ1F3TkNEc1FSbXpicWUxZjhBT09Ybk8wdGJpODhzWGtvaU40NHVkUExHZ2FYaSYjeEE7RWtqSCtVeXFwSHlPWTJwaDFZVGk5L3pEYTNZcThCLzV5Tjg1MmQxUForV2JPVVN0WnViblVPSnFxeThlTWNkUiswcXN4WWU0ek0wMCYjeEE7T3JaQ0x4UU1TUUFLazdBRHJYTWxuVDZsMXZ5WE92NUtQNWRSUDlNdHRQamxLZFQ5WWhJdUpBdnV6cXdIenpBalAxMjFBN3Zsbm5tdyYjeEE7YmFmUlAvT08zbkN6dWRBazh0VHpCYit4a2VXMGlZMDUyOGg1dHc4U2toWXQ4eG1GcUliMjF6RDJITVpneEh6SitWUGtqekZxVGFscSYjeEE7Vmt4dnBBQkxORkxKR1g0Z0t2SUtlTlFCU3RNc2psbEVVRWlUd0g4NDlDOG9lWHZNTUdrK1hsWlhoaDVhaHlrYVNram1xcDhYUWhkeiYjeEE7ODh6TU1wRVdXeU83Q3RMczV0UjFLMHNJRkxUWGMwY0VhanFXa1lLUDE1YVRRdGxUMkg4K1B5dHZoZlRlYmRGZ005dk1PV3EyMFlKZSYjeEE7TndLR2NLT3FrRDQvQTc5SzB4c0dYYWlqSExvOE5XWmxZTXBLc3BxckEwSUk3ak1wdHBrc1A1b2ZtRERFc1VmbUMrNEtLTHltWmpUNSYjeEE7dFU1RHdvOXlPQUlYVnZQZm0vVjdZMnVwNnhkM1ZzZDJna2xiMHpUK1pRYUg2Y0l4eEhJS0lCS2JPM3U3MjZpdExPRjdpNm1ZSkRCRSYjeEE7cGQzWTlBcWlwSnlSTkpwOVdmazMrWEVuazdRNUpkUUNuV3RSNHZkY1R5RVNLUGdoRGR5S2tzUjM4YUE1cjgyVGlQazQ4NVdtSDV3RyYjeEE7bjVhYStmOEFsM0gvQUNjWEk0ZnFDSWMzeDc2bWJKeWFmVHYvQURqMVpXVngrWHF5VFc4VXIvWEp4eWRGWTBISHVSbURxRDZtakp6ZSYjeEE7bWZvclMvOEFsamcvNUZwL1RLTExYYXBEWTJVRDg0YmVPSjZVNUlpcWFmTURHMVZzQ3V4VjJLcGI1bi81UnZWditZTzQvd0NUVFpLUCYjeEE7TUpITjhQZXBtMGNxbnY4QS93QTR1TlcwOHhmOFpMVDlVdVltcTZOT1VQZE14R3AyS3ZuVDg3UHlqdjdMVUxuek5vTnUxeHAxeXpUWCYjeEE7OXJFcEx3U0hkNUFvNnh0MVA4dnl6TndackZGdWhMb1hqS1RNakIwSlYxSUtzRFFnam9RY3lXMm1iYVQrZHY1a2FaQ0lZOVhhNGlYbyYjeEE7THBFbmIva1k0TW4vQUEyVkhCRTlHSnhoMnJmbmIrWkdwUW1DVFYydDRtNmkxU09CditSaUtKUCtHeEdDSTZLTVlZUzh6T3hkeVdkaSYjeEE7U3pFMUpKNmtuTFdWUFp2eVQvS08vdnRRdHZNMnZXN1crbld6TE5ZV3NxbFhua0h4SklWUFNOZW8vbStXWTJmTlFvTlU1ZEEraTh3bSYjeEE7bDh2Zm5KK1ZXb2VYZFV1TlowcTNhWHk5ZE1aV01ZcjlWZGpWa2NEb2xmc3QwN2ZQUHc1UVJSNXQ4Slc4eHQ3eTR0cDBudDVYaG5pSSYjeEE7YU9XTmlycXc2RldGQ0RsNURaVEs0ZnpmL01pR05ZMDErNUtyc0M1UjIrbG5WbVAwbksvQmozTWZEQzI1L056OHhybUV4U2EvZEJHNiYjeEE7K21WamJ3KzFHRmI4Y1JoajNKNEF4UjUza2RuY2wzY2tzeE5TU2VwSnl4TlBkL3lKL0tpK2l2SWZObXV3TkFzUUxhVlp5Q2pzekNuciYjeEE7dXA2QUEvQjNKK0x3cmlaOHZRTk9TWFFQZXN4R3Bobm1MOG52eTkxNlo3aTcwcElidVRkcmkxWm9HSjhTcUVJeDl5cHkyT2FRNnN4TSYjeEE7aElmK2hjZnk1OEwzL2tlUCthTWwrWmtueFMydi9PT1g1Y0JnU2w0d0JxVk54c2ZZMFVISDh4SmZGTE0vTFhrWHlsNVpWdjBKcGtOcCYjeEE7SXdvODRxOHhIZ1paQ3owOXEweXVVekxtV0prVHpUM0lNVUxxdWwyR3JhYmM2YnFFUW5zcnVOb3A0alVjbFliN2loQjhDT21FR2pZUyYjeEE7RFR6ai9vWEg4dWZDOS81SGovbWpMdnpNbWZpbG52bG55em8vbHJSNGRJMG1FdzJjTlNBeExPek1hczdzZXBKL3MyeXFVakkyV0JOcCYjeEE7cGtVT3hWMkt1eFYyS3JaWW81WTNpa1VQSElwVjBZVkJVaWhCSHZpcnpPYi9BSngxL0xlU1Y1Rmp1NGc3RmhHay93QUsxUFFjbFkwSCYjeEE7dWN2L0FERW16eFN5L3dBbStSdkwzayt3bHN0R2lkRW5mMVo1SldMeU8xS0NyYmJBZEFNcm5NeTVzWlNKVC9JTVhZcTdGV0YrWmZ5ZCYjeEE7L0wvekRJODExcGkyMTIrN1hWbWZRY25xU1ZYOTJ4UGl5azViSE5JZFdZbVF3bTcvQU9jWHZMYlNWdE5adklZLzVaVWlsUDNxSXYxWiYjeEE7YU5VZTVuNHhkYWY4NHZlVzFrcmQ2emVUUi95eEpGRWZ2WVMvcXhPcVBjdmpGbXZscjhuUHkvOEFMN3BOYTZhTHE3ak5WdXJ3K3U0UCYjeEE7WWhXL2RxUjRxb3lxV2FSWUdaTE5jcVlPeFZ6S0dCVmhVSFlnOUNNVllScnY1TGZseHJNalRUYVN0cmNPYW1helpyZi9BSVJENmY4QSYjeEE7d3VXeHpTSFZtTWhESHovempWK1h0ZjcvQUZFZTNyUmY5VXNuK1preThVdUgvT05YNWUxL3Y5UlB0NjBYL1ZMSDh6SmZGTEovTFg1UyYjeEE7ZVFQTHN5WEZocFNTWGtkQ2wzY2xwNUF3M0RMekpWRzkxQXl1V1dSNWxpWmtzd3l0ZzdGWG5HcDY1cWFhcFBvNk5xQTFDVHpGWXl3QiYjeEE7SWJzeGZvL2xiR2FrNnA2SWk0ckp5WG5UclVaaThSdXY2WDJPMXg0WThJbjZlSHc1ZFI5VzliYzc1SWE1MUx6MmZMMW5xOTlxTXRzcyYjeEE7dW9yVVc5aExKSmF3cDlhaWIxb1lpV21SL3dCMFJWZXYwWkhpbVlnazlmMXM0NDhQaUdFWTM2ZXNodWZUeUo1ZFZPSHpuNS9iVS9LcyYjeEE7TXR2SkhGZnhXemFtcHM1UXJHVzRramtQTGdSRVZpVlhZT3kwNURIeEozSDhkVW5TNGVISVFmcHV2VjVmYnV5SHlYcW5tKzUxSXJyVSYjeEE7bnFXdHphdGN4TDlXOUF3T3R3MFFqTDErS3FEbHVLNVBET1pPL2M0dXF4NGhIMGN3YTUzZXlSblN2T2pONWgxYU82dW9ZSW4xWVFvYiYjeEE7MjZsZVZBa3FXNlEyYklJb2VMOEhTU055eDQwQStJNUdwYm0rOXlQRXhlaU5DL1IvQ1BLN2x6UHVJWGFWNWk4OFMrYjdUUXlaWWRPZSYjeEE7eWpWcDU3V1J5c3AwOVpmWDlabENOKy9KVXFaSzFCRk8rQ001OFFIU3YwSXlZTUl4R2Y4QUZmZi9BRXVWZTd5UWx1bm5UVS9MM2xhRiYjeEE7dFp2a3VQMHFiZldEOVd1TGFaUWx1OG5HVncwVHNpTkhRdFhpeFlmeTBLT0l4RzU1dGg4S0U4aDRZMXdYSGNIcitQZFN1L20zejJkUyYjeEE7MXkzZ01qaTNXODlCRzArVkZ0M2kxQklMVUxLd0MzSHEyck5MOE9HV1NkbXZ1ODJQNWJEd3hKNjEvRno5Tm4zVkxaRzY3ZS9tUFpYMSYjeEE7blkyK29KS1I5VWp1YnRMRGtqL1hMNlNBeWNlZndHR0RpekN0S2l1d3d5TXdRTCt4cnd3d1NCa1IzN2NYZEcvdEtLMXErODIzWDVUMyYjeEE7ZDVGTEpiZVlCYVNrdkJDeXlzMGJNdjd0QWVTTzZqWXIwNmpDWlNPTytyREZERU5TQWQ0WDNvS2ZWUE4ramVaOUkwR0s1bXZMUkJaUSYjeEE7eUY3T2ViNnhISVpCZFR2ZHMwbnBtSUlwb3oxeUpsT01nTDdtd1k4V1RIS1pBQjlYVUN1VkN2Tmt2a2VUek5jYVNsN3J0eWt6M2FKTCYjeEE7RkFMZjZ1OEJOZWFQdWVYYW13eTNDWkVYSnhOV01ZbFVCeTg3dDUwbm5EOHdrMGZVZFZpa3VidS9hMzBsWlluMDY0aGp0SkpKTHI2MyYjeEE7SEZBeW4xVEg4Q3RLb05SVHdHVUhKT2lRYjVkUGU3VTZYQnhpSm9DNS93QVEzK25oMzZlNU5kTzFqemhlMyttM1YxOVpQcjJ1am00UyYjeEE7TmJpR0gxRzFHNFNkdlQrRGl4aUMrb0NPbEtqalRDSnlOZkQ3MmllTEZHTWdLMk0rNG42UlgyOG5hdDVzL01tMzBQVUxsTFZvN2pUcCYjeEE7NGRPWmx0WGw5WjFkek5lUm9xczNwdkdZdU5BUlV0OURMSmtyM2JmdFhIcHRPWmdYdElFOCtYZEgzODAxOHQzM25iWFpiUDYzZExhVyYjeEE7WTArMW12NHZxMHNUVHlYRXQxRktJNVNZcElYUklZMjJHeE5kc25BemxXLzQzYWM4TU9NR2haNGpXL0toR3ZmektQOEFJdGo1Z1NmVSYjeEE7SmRhdjU3czJVamFaWUxKelJYdDdjMVc1a1VuaTgwdklCbnArenQxT1N3aVc5bmxzMTZ1Y0tBZ0FMOVI5NTZlNGR6SEp2TUhubSt1ZiYjeEE7TStueFhFMFN3V21xUGJzdGhMRWJlUzJ1dlR0RWluUEZabXVMYXJoa094M0hUS3pLUjRoZlF1VU1PR0loSWdibVA4UTNzYjdkS0tlYSYjeEE7clo2cnB2NVpyYnRlWHR6ZXhMYm00dklUY0c3TWIzS05NUVZhV2VxeE13MlltZ3ljZ1JqNTd1UGpsR2VvdW9nYjdiVnkyOHVhVDZOYyYjeEE7NjVKSkphK1hkUTFCTlB1OVdTQ0RVTlZodXJsNDRGMDJTYVFoYjMwNU9QMWlJTFU3Vk9SaVpHNlBYOURmbGpBYjVCSGlFT1VTQnZ4QSYjeEE7ZncrUzZ6MVR6WmRYZWozVnlsMHJYZjZEa3ZJbEUwY1NOTmIzTFhYd0tWQUhQanpWdHVuTHRrZUtWai9OL1NpZVBFQklDdHVPdVhlSyYjeEE7UXR4NW4vTW15OHJUM3NqRzZ2cExIU0wySXBZc0RBMTY4cTNVUmpUMUM1aVdOYTdWRmVtR1U1aU4zM014cDlQTElCeUhGTWZWenFxUCYjeEE7eFR5NzFMWHIzOHJZNzY1YTRqMU9WSUd1M3NvNTRaeEg5WlFUTWlJcXpLZlI1RThWcjRaSXlrY2Q5ZjJ1UEhIQ09wNFJYRHZWMVhMYiYjeEE7eTVzZTAvWGRkc3RJbmtzN25VTGF3azFjUWZwSzZoMURWWFMwK3B2SUhqaHVZb3JrQnBrUkcyS2hpYUdtUUVqWFByejV1VlBEQ1VoWSYjeEE7aVpjSElHTWQrTHZCcmxaVHV3OHdlZnBydlRMYWUwS2ZYTEMzMU81bjlCZ3NSVzFJdUxSbFBTUTNYQXFLMUNzZkRKOGM3cnl2OGZGeCYjeEE7NTRjQUVpRHlrWTgvUFkrNnJTTHk1NXMvTXpXTkt0NDVKUHFsL2NhbEZiTmNTV0VnOUdGN1NhVitjY2l4S1ZFc1NEa1BIcmxjTW1RaiYjeEE7enR5TSttMDhKSHFCRy9xNTdqOUNjcnJ2bjZIekJJc3Arc2FlbDVjMlgxYU8wSUpXSFRCZEpPa3RTYVBjZnV3RHQyclhKOFU3K2YzTiYjeEE7SGc0RERiYVZBOCsrZFY4dDBzOHJlWi96RzF1Mmp0WnBUWlR5NmlrQTFDU3djY2JjMk04NzhvcFZoRzAwS3B5OFQxT1J4em5JVmY0MyYjeEE7YmRScDhHTTJOL1R5NHV2RUIwdm9VdzB6elY1dHVOYTBLRzhhVzNTOHN0UG11TE5kT2xrU1NXNGlkcm90Y2JMQjZUQWJFL1Fja01rdSYjeEE7SWZEbzE1TlBpRUprYjFLVy9FT2gyMjYycS9sUDVuODQ2NStsUDhTeEdGN2NXL294TmJTMnpJOGhsOVZQalZRNFhndEtFKy9iSmFlYyYjeEE7cFh4TWUwZFBpeDhQaDliNjMzVTlCeklkWS8vWjwveG1wR0ltZzppbWFnZT4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOkFsdD4KICAgICAgICAgPC94bXA6VGh1bWJuYWlscz4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvanBlZzwvZGM6Zm9ybWF0PgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICAgICAgICAgIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIgogICAgICAgICAgICB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIj4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDo2MThCREJERkU2OUVFQzExQjkwQ0U3NDZBQzMwMUVBRjwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+eG1wLmlpZDo2MThCREJERkU2OUVFQzExQjkwQ0U3NDZBQzMwMUVBRjwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjg2RDZGNzdFMkM5QUVDMTE5MUYyQkIxMTI5RTVGQUM5PC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpSZW5kaXRpb25DbGFzcz5wcm9vZjpwZGY8L3htcE1NOlJlbmRpdGlvbkNsYXNzPgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjYwOEJEQkRGRTY5RUVDMTFCOTBDRTc0NkFDMzAxRUFGPC9zdFJlZjppbnN0YW5jZUlEPgogICAgICAgICAgICA8c3RSZWY6ZG9jdW1lbnRJRD54bXAuZGlkOjYwOEJEQkRGRTY5RUVDMTFCOTBDRTc0NkFDMzAxRUFGPC9zdFJlZjpkb2N1bWVudElEPgogICAgICAgICAgICA8c3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPnhtcC5kaWQ6ODZENkY3N0UyQzlBRUMxMTkxRjJCQjExMjlFNUZBQzk8L3N0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD4KICAgICAgICAgICAgPHN0UmVmOnJlbmRpdGlvbkNsYXNzPnByb29mOnBkZjwvc3RSZWY6cmVuZGl0aW9uQ2xhc3M+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDo4NkQ2Rjc3RTJDOUFFQzExOTFGMkJCMTEyOUU1RkFDOTwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAyMi0wMy0wMlQxODo1NzoyNCswNTozMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgSWxsdXN0cmF0b3IgQ1M2IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6NjE4QkRCREZFNjlFRUMxMUI5MENFNzQ2QUMzMDFFQUY8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMjItMDMtMDhUMTk6MjI6NDkrMDU6MzA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIElsbHVzdHJhdG9yIENTNiAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICA8L3JkZjpTZXE+CiAgICAgICAgIDwveG1wTU06SGlzdG9yeT4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pv/bAEMAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAgIBAQIBAQECAgICAgICAgIBAgICAgICAgICAv/bAEMBAQEBAQEBAQEBAQIBAQECAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAv/AABQIABoAOAQBEQACEQEDEQEEEQD/xAAfAAAABgMAAwAAAAAAAAAAAAAABAUGBwgDCQoBAgv/xAAuEAAABgEDAwMEAQUBAAAAAAABAgMEBQYHCBESABMhCRQxFRYiM0EKFyNCUXH/xAAdAQABBAMBAQAAAAAAAAAAAAAEAAUGCAIDBwEJ/8QALxEAAgIBAwMDAwMDBQAAAAAAAQIDBAUGERIAByETIjEIFEEyUYEjM6EVJjRhcf/aAA4EAQACEQMRBAAAPwD5/wD0ul138dDpdLoddEv9OPp3wpmjU5ma75Tr1QvVpwZhpO7Ygo19bIylRVvkva2FebXmcglEj/V2sH3moEAySxGq9hSfERM8bNDkqJ9YOrNTae0XpvF4G3YxdLVGRNbIWqrFLAqxwPMascu49M2iDy2KmRIWiLem8gI8ySSvBCpKpI2zkfPH8gf+/wCdtvz1X7UJNzkbXoOOiXDti1nZozOYfMTGSd+wRaKOBYIrgIdkVzFNuICUTFbCQR4GOA9OUrnaZwZR3Nny/j2Oy1laz/aFQt+NMMxVGfqX+yWCaiKurFUSEerOX89Wm68s/VYNJgE2zGDjTnk3bFUV0yWB+n3vH2i0/h9G9ue2mFyl77xeMiPj/SkEnpNLau5W1ZKRWZ5WUmT0GsBtwsQSFVVfkn37+kj6hO4Ore4/djuBrjB6A0ZpVrF3H5PJ52xLHBRidjj6NCrSjJx4WMRI0jpVkkuO3FbUziSRtErNbm42Pjayu8aNWzU6xHMkk8RWbKJoisqu8XDYvuzqE3OdETcjmDh+IFDrjB9afCeF8BeoVmSiYKYw9fp6zGkWx/Sq8CKUFRLZcKrHztkrMOzQESxMZ7tym/QYl2SYpzpWjciTdFJInZta1sdV1DbXGIsNaRY5DGn6I3dA0iIPOyhjuF3PENxHgDq430Va41l3B+nnRmoNcTzZDLq96pHdscjPfqU7cletamdvMsvBDA853adoDLIzSO7GasbOph1U2Azairh4gq8alduBEXDxq2cHSarrnH9qvaDgY4+TilyMImERHVN1E+rXdPzodLpdDq2ef9GGZNNuea5pzyL9pGyJaWtGdxX29Yfq0CZLITwGEAVeWUYIdg4OxErjdLZLiJgFQogIwrTWvcDqvTlrVOKM3+l02sK5lj4SA1V5S7IGbf2+V93n4Ox6cLeNsUraU5WRpZOBBVt19/gbnYfz48dJMfNMZNgrJNTHM1SFcDmOTiYBbhyU2Lv58fHnqxUT6TGpqSybqMxc+seDqrJaWk6I4yzZrjk9KuUaMaZEg17BAPmdnfQgJHYlYNze6WckakbqHImImEwD1F5u9WkIsTpXMR18hdi1ibIowwVDLYdqsgilUwrJvy5H2KhcsNyNgOjEwFtp7sBsQRmjw5s0nFPeNwQ3HYgD5322PSea2xJW0c6L7pUkr3wZJotxUWVFuoCahQSKbcTch8AG+/Uo400M66dKVvxrqCwLnDC8W2f3+OxShnvD+b69c8eUmy3Zw3gY6vZTkI2NdIsazKSD+Pj3BH7B5FnWlGiEgVIHCBjMma7gdttb0MtpbVGnb1kx1munGX8fLBasRVwZWmpK7ozTQqrSo0UkcwVHaIkq23rYK5CYZEswSRu4T1ElDojE7DmQDxBOw32I3IB236TpKUrFgauYeYYLuSCgL0Y1+yVScKptt1RXaFMJTd8hSHMUxDFOAEMJfgerPVzL/rS2PVvk/T/DXyqYxy3jinzbvI9lUqWL6ljimUmPbpybjIhLYpS3CENHSjR7Hi1kGSJFXCToiREkU0XBUstK5/tT2z0rS1tpj1PtNQtHXrOA9zIyyOxX7OFZ2aVHRlb1o1ddyo5s/wDT35x3P7MaX72w4/SfcjFNncNp+wbi0zeu08e8yqAk1uGnYrxXQg/sC0kwiLs0SozuThZBToaGSeNSdxk/ORBADGUdO11BMJQapgqcTcimKbkXf/X8hH8eqERPp7aj8z1MmpbLuZsHYyrOWrVYVqxlHU3msKbIZplCyTskjba6abjXMnOx7x8i5WTfvUW4uUTFdgX2501DSbK93cFXzVzCVsdlNS5ykqyXIcdTa29QuA3Cy4cIso3AdFdyr7pvzBAmmC0dTxGGx+OxUVHT2Dx8aV6kCcK0EcMICRx14Y0CpEigBFCqAu2w289LJrDGNlzRrVu8dLtE0+81jWYrgzASgJUlQSHimYAEAEoCOw+Pnx0wrP6aGr6tahqVpoJjhCy33JEGFtoMzU7BFTePLZSEklFpG8Rt8IqmxQq7NJBYXazoyCiH+IpkRM5aAvuqd2tD29MZDVhyxq43FSehZSaJ47UFgkBK71tjIZnJHBUDBvJDbI/EuTDX47kdH0xJLMOSsrAxsv5YP8BRsd99iP28jfKnZ4VSPXkveFTbtVOw4KqUxF0VxEAKgdAQ5d0RENgAB38+fA7SpJ+kXqTGCusnQMgaZc3WHH0HK2O1Y1wnneuX7JkbEQIGNOugqrVmkZ4ZmQiveTSVMoJydpMqixiJnZ4u92kxYx8WTx2W09WyciRQ28hjpatR3k/tj1mZgvPxxJG2x5EhQSCX09bEcjxWq1p4gSyRTBnAHz7dhvt+wO/4Hnx0WC3RRToA4TfsU3KhEkXD1kq3bHOp+sveP4Dl42/93+PPW4jVdgPGGv3V5pz1z4R1kaLKzgoKhgR9fozLmoKqY1ypjpzjacGaukROY1sHB65lkYwxQSSKZIqrkDEMcjUUnq1cNE6zzXa3Qmru2upu3mpLmqRYyi1HoYme7RuC5F6daSK7FvEsbP5Ztm4psQC/KJWSzk3msLNLG5kTiBsrEHidxsQCP89QbBXCUp1fnalO1C6OJ4rqXTYqRVeeScZIFeJdpkshJNwEgIirvuPkQLsOwm3ID5aaldDmar569N9umXOOBchwen2Arp6XY6TA5ZyhAUetzNNnn+Da5kl60TtkgpYYtBRmBkDpiydpOViJAsn0BNpfubpvGfS/i6GA/wB1UJcrJMLMVmWjSlsTR2Ikyc1NZDAiwyFZNmB9RWRSeLdEvk5nafkrH74AN4J2CjxuQCB/PjrEqzu8U0w2xbxJxmxVmVXgOmz1eLjFnCyLpuSbcxyZ/aEBuqIG3MAgchilERKPWpLK2tLRJjDQ9lvRnoiompCU/v8A36qWzJmS9Sr/ABw1eRcXUXsVJMYeowGO1FUFF1F4NkkZdYrcU0nThQ53Kotgad6wXb3uVme4+D7gdyMph4F0vVngp08Mttld51dGksS2wrBQJGYKvPkyoAEXnzwW06V5KyAqkpBbc777fxt+OpPiq5c31oYWO2vIBFOKZuEGUdAFfqFVVcFOQyrpZ8UogUAVMIAG+4lAAAoAblbzUzrkmLd6LeB55DIOLXGpnPtlc6b9RclCy9eVzlN4Nwu8yAenJ3Ri0lDS7NjItwhyvHTxEGz1OcedgAGZdc4Do3t5HS+ovVVF8VeTR2lYFy+JWSOYYyPJZFan3H27sgrs0JMnppG3OMxJy/46bbHytmRHrsTyZQrPsfco+AW/Pyfyfz/302IGDOllqejzspQsBCMkpyFMsg4LDhKSpGQOCtVzpdpU6ZjLcSkNyIKJeX6g6M5vwhV/VJ0o6AJvTBn7TJWb1pxwKywnmnBeZ8207Ctmp07EFgWZ7ZDM7s4QRm648PBO1BcthMCrYWgpCsuR22aD6f1bd7I657pVNcaVzVzF6sybZHGZPHY2xkoLET+q3oSNWDNFNH6ijg4Gz+py4qY3kFtX2kEMcqtxgXiuykrt4/IGwPRJlaXWOrLcGtpgrM4YzEsaThJqHhHsy0dt1BVMDVU7EhhQckBYgcDbbGA2+xRIY136Pqt0XaesxaKdGtr1J4vsb/GOhjNemzKGp6ozJZ7EmPcsZQ+wXNdhm1+Q2RXr7JzQn7dd8mYGrEXcWDxZoJXxWXOsjo7uTqvTncbuJQ0bepw5jUuOy9HC2IzFkLePp/dCaQ1G9yyyCyjpEw9SQLP6ayAxGUqPLTpFGVRtoUZB4Ibi22+wPnbx8fn8dNpwxus1C2u2s67Kt03dsi5qLrjtAyExIRDEXYOFfp5vyIscrtIxUxDmftqcAP8AgJ6m6V9EukjRvQMyW3X1dtDWTalGQ1rnKNlDBGt212LOlrcLV9hDwGKaPinD9kjhexcr25h44cvuLkh5VNu7TMzIuq2mute5+uu4WW07ju1eL1Ph8hYkgis0sppqGHGQKJWklvWb2QhlCvBvHGqRboQjNGRIVVwYLkaniIGZjv5IdNht58jYbHpZnb9ZLU/imdHjbsxeLLN0HrCbppGcO0J3TqLyL2VlEDAmdPdIoFJuUQTESjzEoG116Vsc49sWF4GTsFEps7JKVm4uFJCZq8JJvTuGU5PJM1zu3rE6hlkUiEKkYTckykACCAAAdfRfCV4JKMRkgSQlHPuVT5DtsfI+R+D8jqpvc/UGex+sb9ehm7dKBbNVQkNmaNArwQF1Co6qA58sNtmPk79O21yUi2m10m8g9QSB2zKCaLpdJMCnboicoEIoAAUR8iG3kfnqTq9jnHr7H9LfPaJTXj1xVkirvHVYhHDpcrag1103Ks4WYidQE3JzqEAwjxUMJy7GER6Phq1jVrb10PNAG9i+QIkIB8edj5G/wfPUVvagz0Wez0UWbuRRQ2iUVbMyqpa/YRiqhwFLIArEAbqOJ3HjpMcyUinIvU0371MhXY8SEdLlIXlIuCG2KVTYNyAAD/0PHx0yWVAoh5mJRPSqkdENRGM4oEjVuGMkEZJVirOpGNBMWWwMHDkRUXR27apx5qFMbz1oSrV9RR9tHt93Av6F/S0aFh8fBPkj4J+enexn86tO24zVsOdP5KXcWZt/Vjt2ljk357+pGvtR/wBSr4UgdHVJB+CCpgfPAN9uSau4OVt+6k8dkTU35/sKXwU3yAeAHbpYzPjjHkTUZt7F0OmRrw14sEUZ3H1eDZuTRiEeUEI0y7diU4sCAQnBHftl4BsUNg69yFWqkU3CtGn9Rh4RR4CnYeB8D9vjofR+otQWsnQhtZ25Zh+zry8JLU7r6jSeZOLORzO53fbkdzuesULJSKr1FNWQeqkBg3WAijpc5AVMoG6vEygh3B3Hc3z5+enFW8aY5k5OWQkqBSZBBrmK0RbVF9VYJ2k2jEpGDSSjkE12BgRYFSAClRKAJgUNgKAeOs1r1+Tr6Cbeuy7cV248l9vx8ePj46Cu6j1DXrVZK+duQPJiKkrMlqdS0pjmJkYq4Jckklz7iSTvv0WdSckkmkZKQfJGPDNFTmTduCCZUybkRVMJVA5KCPkTD53/AJ68JYzxuekC6Pj+kHctqrcPbOTVSBMu39pkNZo17CwsOSXaaGMknxEOCZhIXYo7dZLTpmpyNWMsI5dj6a7jjLsPO34HgfsPA61yal1GudEK5+6sUlunyUWpwrc8eHfkvqbHm/ubce5vcdz569RlJP3vD6i+4mds+RfduOJucaQ5+Re5sO5/I/8AR8j56iTVtjfHdawpZZWu0KlwEohOYzRRkoWrQcU/RRfsFzv0knjFimommucAFYoGAFBDc4GHptzlatHj5njrpGwaHYqigjddz5A38nyf3PUx7U6i1BkdY46rkM7cv1nhyTNHNanlQmN1CEo7spKDwhI3UeBt0tU+TknU41RcyD5wkZGUEyS7tdVMwpqlBMRIooICJQ+PHj+Ov//Z";
const jsPdfGenerator = async ({ breakPageLimit = null, tenantId, logo, name, email, phoneNumber, heading, details, t = (text) => text }) => {

  const emailLeftMargin =
    email.length <= 15
      ? 190
      : email.length <= 20
      ? 150
      : email.length <= 25
      ? 130
      : email.length <= 30
      ? 90
      : email.length <= 35
      ? 50
      : email.length <= 40
      ? 10
      : email.length <= 45
      ? 0
      : email.length <= 50
      ? -20
      : email.length <= 55
      ? -70
      : email.length <= 60
      ? -100
      : -60;

  const dd = {
    pageMargins: [40, 80, 40, 30],
    header: {
      columns: [
        {
          image: logo || getBase64Image(tenantId) || defaultLogo,
          width: 50,
          margin: [10, 10],
        },
        {
          text: name,
          margin: [20, 25],
          font: "Hind",
          fontSize: 14,
          // bold: true,
        },
        {
          text: email,
          margin: [emailLeftMargin, 25, 0, 25],
          font: "Hind",
          fontSize: 11,
          color: "#464747",
        },
        {
          text: phoneNumber,
          color: "#6f777c",
          font: "Hind",
          fontSize: 11,
          margin: [-65, 45, 0, 25],
        },
      ],
    },

    footer: function (currentPage, pageCount) {
      return {
        columns: [
          { text: `${name} / ${heading}`, margin: [15, 0, 0, 0], fontSize: 11, color: "#6f777c", width: 400, font: "Hind" },
          { text: `Page ${currentPage}`, alignment: "right", margin: [0, 0, 25, 0], fontSize: 11, color: "#6f777c", font: "Hind" },
        ],
      };
    },
    content: [
      {
        text: heading,
        font: "Hind",
        fontSize: 24,
        // bold: true,
        margin: [-25, 5, 0, 0],
      },
      ...createContent(details, phoneNumber, breakPageLimit),
      {
        text: t("PDF_SYSTEM_GENERATED_ACKNOWLEDGEMENT"),
        font: "Hind",
        fontSize: 11,
        color: "#6f777c",
        margin: [-25, 32],
      },
    ],
    defaultStyle: {
      font: "Hind",
    },
  };
  pdfMake.vfs = Fonts;
  let locale = Digit.SessionStorage.get("locale") || "en_IN";
  let Hind = pdfFonts[locale] || pdfFonts["Hind"];
  pdfMake.fonts = { Hind: { ...Hind } };
  const generatedPDF = pdfMake.createPdf(dd);
  downloadPDFFileUsingBase64(generatedPDF, "acknowledgement.pdf");
};


/**
 * Util function that can be used
 * to download WS connection acknowledgement pdfs
 * Data is passed to this function from this file
 * packages\modules\ws\src\utils\getWSAcknowledgementData.js
 * @author nipunarora-egov
 *
 * @example
 * Digit.Utils.pdf.generatev1()
 *
 * @returns Downloads a pdf  
 */
const jsPdfGeneratorv1 = async ({ breakPageLimit = null, tenantId, logo, name, email, phoneNumber, heading, details, headerDetails, t = (text) => text }) => {
  const emailLeftMargin =
    email.length <= 15
      ? 190
      : email.length <= 20
        ? 150
        : email.length <= 25
          ? 130
          : email.length <= 30
            ? 90
            : email.length <= 35
              ? 50
              : email.length <= 40
                ? 10
                : email.length <= 45
                  ? 0
                  : email.length <= 50
                    ? -20
                    : email.length <= 55
                      ? -70
                      : email.length <= 60
                        ? -100
                        : -60;

  const dd = {
    pageMargins: [40, 40, 40, 30],
    header: {},
    footer: function (currentPage, pageCount) {
      return {
        columns: [
          { text: `${name} / ${heading}`, margin: [15, 0, 0, 0], fontSize: 11, color: "#6f777c", width: 400, font: "Hind" },
          { text: `Page ${currentPage}`, alignment: "right", margin: [0, 0, 25, 0], fontSize: 11, color: "#6f777c", font: "Hind" },
        ],
      };
    },
    content: [
      ...createHeader(headerDetails,logo,tenantId),
      // {
      //   text: heading,
      //   font: "Hind",
      //   fontSize: 24,
      //   bold: true,
      //   margin: [-25, 5, 0, 0],
      // },
      ...createContentDetails(details),
      {
        text: t("PDF_SYSTEM_GENERATED_ACKNOWLEDGEMENT"),
        font: "Hind",
        fontSize: 11,
        color: "#6f777c",
        margin: [-25, 32],
      },
    ],
    defaultStyle: {
      font: "Hind",
    },
  };
  
  pdfMake.vfs = Fonts;
  let locale = Digit.SessionStorage.get("locale") || "en_IN";
  let Hind = pdfFonts[locale] || pdfFonts["Hind"];
  pdfMake.fonts = { Hind: { ...Hind } };
  const generatedPDF = pdfMake.createPdf(dd);
  downloadPDFFileUsingBase64(generatedPDF, "acknowledgement.pdf");
};

/**
 * Util function that can be used
 * to download WS modify connection application acknowledgement pdfs
 * Data is passed to this function from this file
 * packages\modules\ws\src\utils\getWsAckDataForModifyPdfs.js
 * @author nipunarora-egov
 *
 * @example
 * Digit.Utils.pdf.generateModifyPdf()
 *
 * @returns Downloads a pdf  
 */

const jsPdfGeneratorForModifyPDF = async({tenantId,bodyDetails,headerDetails,logo}) =>{
  //here follow an approch to render specific table for every object in bodyDetails
  //keep the header logic same for now
  //we are expecting the bodyDetails to be array of objects where each obj will be a table 
  //format of each obj {title:[array of str],values:[array of obj]}
  
  const dd = {
    pageMargins: [40, 40, 40, 30],
    header: {},
    defaultStyle: {
      font: "Hind",
    },
    content:[
      ...createHeader(headerDetails, logo, tenantId),
      ...createBodyContent(bodyDetails)
    ]
  
  }

  pdfMake.vfs = Fonts;
  let locale = Digit.SessionStorage.get("locale") || "en_IN";
  let Hind = pdfFonts[locale] || pdfFonts["Hind"];
  pdfMake.fonts = { Hind: { ...Hind } };
  const generatedPDF = pdfMake.createPdf(dd);
  downloadPDFFileUsingBase64(generatedPDF, "acknowledgement.pdf");
}

/**
 * Util function that can be used
 * to download bill amendment application acknowledgement pdfs
 * Data is passed to this function from this file
 * packages\modules\ws\src\utils\getWsAckDataForBillAmendPdf.js
 * @author nipunarora-egov
 *
 * @example
 * Digit.Utils.pdf.generateBillAmendPDF()
 *
 * @returns Downloads a pdf  
 */


const generateBillAmendPDF = async ({ tenantId, bodyDetails, headerDetails, logo,t }) => {
  const dd = {
    pageMargins: [40, 40, 40, 30],
    header: {},
    defaultStyle: {
      font: "Hind",
    },
    content: [
      ...createHeaderBillAmend(headerDetails, logo, tenantId,t),
      ...createBodyContentBillAmend(bodyDetails,t)
    ]

  }
  

  pdfMake.vfs = Fonts;
  let locale = Digit.SessionStorage.get("locale") || "en_IN";
  let Hind = pdfFonts[locale] || pdfFonts["Hind"];
  pdfMake.fonts = { Hind: { ...Hind } };
  const generatedPDF = pdfMake.createPdf(dd);
  downloadPDFFileUsingBase64(generatedPDF, "acknowledgement.pdf");
}

export default { generate: jsPdfGenerator, generatev1: jsPdfGeneratorv1, generateModifyPdf: jsPdfGeneratorForModifyPDF, generateBillAmendPDF };

const createBodyContentBillAmend = (table,t) => {
  let bodyData = []
  bodyData.push({
    text: t(table?.title),
    color: "#000000",
    style: "header",
    fontSize: 14,
    bold: true,
    margin: [0, 15, 0, 10]
  })
  bodyData.push({
    layout:{
      color:function(rowIndex,node,columnIndex){
        if(rowIndex === (table?.tableRows?.length)) {
          return "#FFFFFF"
        }
      },
      fillColor:function(rowIndex,node,columnIndex){
        if(rowIndex === (table?.tableRows?.length)) {
          return "#F47738"
        }
        return (rowIndex % 2 === 0) ? "#F47738" : null; 
      },
      fillOpacity:function(rowIndex,node,columnIndex) {
        if (rowIndex === (table?.tableRows?.length)) {
          return 1;
        }
        return (rowIndex % 2 === 0) ? 0.15 : 1;
      }
    },
    table:{
      headerRows:1,
      widths: ["*", "*", "*", "*"],
      body:[
        table?.headers?.map(header =>{
          return {
            text:t(header),
            style:"header",
            fontSize:11,
            bold:true,
            border: [false, false, false, false]
          }
        }),
        ...table?.tableRows?.map(row => {
          return [
            {
              text:t(row?.[0]),
              style:"header",
              fontSize:11,
              border: [false, false, false, false]
            },
            {
              text: t(row?.[1]),
              style: "header",
              fontSize: 11,
              border: [false, false, false, false]
            },
            {
              text: t(row?.[2]),
              style: "header",
              fontSize: 11,
              border: [false, false, false, false]
            },
            {
              text: t(row?.[3]),
              style: "header",
              fontSize: 11,
              border: [false, false, false, false]
            }
          ]
        })
      ]
    }
  })
  return bodyData
}

const createHeaderBillAmend = (headerDetails, logo, tenantId,t) => {
  
  let headerData = [];
  headerData.push({
    style: 'tableExample',
    layout: "noBorders",
    fillColor: "#f7e0d4",
    margin: [-40, -40, -40, 40],
    table: {
      widths: ['5%', 'auto', '*'],
      body: [
        [
            {
            image: logo || getBase64Image(tenantId) || defaultLogo,
            // width: 50,
            margin: [10, 10],
            fit: [50, 50],
            //width: 50,
            //margin: [10, 10]
          },
          {
            text: headerDetails?.header, //"Amritsar Municipal Corporation",
            margin: [40, 10, 2, 4],
            style: "header",
            // italics: true, 
            fontSize: 18,
            bold: true
          },
          {
            text: headerDetails?.typeOfApplication, //"New Sewerage Connection",
            bold: true,
            fontSize: 16,
            alignment: "right",
            margin: [-40, 10, 2, 0],
            color: "#F47738"
          }
        ],
        [
          { text: "" },
          {
            text: headerDetails?.subHeader, //"Municipal Corporation Amritsar, Town Hall, Amritsar, Punjab.",
            margin: [40, -45, -2, -5],
            style: "header",
            // italics: true, 
            fontSize: 10,
            bold: false
          },

          {
            text: headerDetails?.date, //"28/03/2022",
            bold: true,
            fontSize: 16,
            margin: [0, -45, 10, 0],
            alignment: "right",
            color: "#F47738"
          }
        ],
        [
          { text: "" },

          {
            text: headerDetails?.description, //"0183-2545155 | www.amritsarcorp.com | cmcasr@gmail.com",
            margin: [40, -40, 2, 10],
            style: "header",
            // italics: true, 
            fontSize: 10,
            bold: false
          },
          {
            text: "",
          }
        ]
      ]
    }
  });
  headerDetails?.values?.forEach((header, index) => {
    headerData.push({
      style: 'tableExample',
      layout: "noBorders",
      fillColor: "#f7e0d4",
      margin: [-40, -40, -40, 20],
      table: {
        widths: ['30%', '*'],
        body: [
          [
            {
              text: header?.title,
              margin: index == 0 ? [40, 0, 2, 10] : [40, 10, 2, 10],
              style: "header",
              fontSize: 10,
              bold: true
            },
            {
              text: header?.value,
              bold: false,
              fontSize: 10,
              alignment: "left",
              margin: index == 0 ? [0, 0, 2, 10] : [0, 10, 2, 10],
            }
          ]
        ]
      }
    })
  })
  //push demand revision details old way

  headerData.push({
    style: 'tableExample',
    layout: "noBorders",
    fillColor: "#f7e0d4",
    margin: [-40, -25, -1000000, 20],
    table: {
      widths: ['30%', '*'],
      body: [
        [
          {
            text: headerDetails?.DemandRevision?.title,
            margin: [40, 0, 2, 20],
            style: "header",
            fontSize: 13,
            bold: true
          }
        ]
      ]
    }
  })

  headerDetails?.DemandRevision?.values?.forEach((header, index) => {
    headerData.push({
      style: 'tableExample',
      layout: "noBorders",
      fillColor: "#f7e0d4",
      margin: [-40, -40, -40, 20],
      table: {
        widths: ['30%', '*'],
        body: [
          [
            {
              text: header?.title,
              margin: index == 0 ? [40, 0, 2, 10] : [40, 10, 2, 10],
              style: "header",
              fontSize: 10,
              bold: true
            },
            {
              text: header?.value,
              bold: false,
              fontSize: 10,
              alignment: "left",
              margin: index == 0 ? [0, 0, 2, 10] : [0, 10, 2, 10],
            }
          ]
        ]
      }
    })
  })

 //attachment details
  headerData.push({
    style: 'tableExample',
    layout: "noBorders",
    fillColor: "#f7e0d4",
    margin: [-40, -25, -1000000, 20],
    table: {
      widths: ['30%', '*'],
      body: [
        [
          {
            text: headerDetails?.Attachments?.title,
            margin: [40, 0, 2, 110],
            style: "header",
            fontSize: 13,
            bold: true
          }
        ]
      ]
    }
  })
  
  headerData.push({
    layout: "noBorders",
    ul: headerDetails?.Attachments?.values,
    margin:[0,-130,0,40]
   })

  return headerData;
}

const createBodyContent = (details) => {
  let detailsHeaders = []
  details.map((table,index) =>{
    if (table?.isAttachments && table.values) {
      detailsHeaders.push({
        style: 'tableExample',
        layout: "noBorders",
        margin: [0, 13, 0, 5],
        table: {
          body: [
            [
              {
                text: table?.title,
                color: "#000000",
                style: "header",
                fontSize: 14,
                bold: true
              }
            ]
          ]
        }
      })
      detailsHeaders.push({
        layout:'noBorders',
        ul: table?.values
      })
      return
    }
    detailsHeaders.push({
      layout:'noBorders',
      table:{
        headerRows:1,
        widths:["*","*","*"],
        body:[
          table?.title?.map(t=>{ 
            return {
            text:t,
            color: "#F47738",
            style: "header",
            fontSize: 14,
            bold: true,
            margin:[0,15,0,0]
            }
          }),
          ...table?.values?.map((value,index) => {
            return [
              {
                text:value?.val1,
                style: "header",
                fontSize: 10,
                bold: true
              },
              {
                text: value?.val2,
                fontSize: 10
              },
              {
                text: value?.val3,
                fontSize: 10
              }
            ]
          })
        ]
      }
    })
  })

  return detailsHeaders
}

function createContentDetails(details) {
  let detailsHeaders = [];
  details.forEach((detail, index) => {
    if (detail?.title) {
      detailsHeaders.push({
        style: 'tableExample',
        layout: "noBorders",
        margin:[0,13,0,5],
        table: {
          body: [
            [
              {
                text: detail?.title,
                color: "#F47738",
                style: "header",
                fontSize: 14,
                bold: true
              }
            ]
          ]
        }
      })
    }
    if (detail?.isAttachments && detail.values) {
      detailsHeaders.push({
        ul: detail?.values
      })
    } else {
      detail?.values?.forEach(indData => {
        detailsHeaders.push({
          style: 'tableExample',
          layout: "noBorders",
          table: {
            widths: ['40%', '*'],
            body: [
              [
                {
                  text: indData?.title,
                  style: "header",
                  fontSize: 10,
                  bold: true
                },

                {
                  text: indData?.value,
                  fontSize: 10
                }
              ]
            ]
          }
        })
      })
    }
  });
  return detailsHeaders;
}

function createHeader(headerDetails,logo,tenantId) {
  let headerData = [];
  headerData.push({
    style: 'tableExample',
    layout: "noBorders",
    fillColor: "#f7e0d4",
    "margin": [-40, -40, -40, 40],
    table: {
      widths: ['5%', 'auto', '*'],
      body: [
        [
          // {
          //   margin: [40, 10, 2, 2],
          //   "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABBtJREFUWAntV11oVEcUnjN3mzXm111toQ8lWOtLTbIG0YgpMdQ05CEv0iTU1hhR7EMRWYuKSkteVExJBRGkpaUk0ChRSYtpKam4sbE0ia7RSNaS0uIfWtT4E8Xs5u7O8Vy7c3f27t2fh4W+ZF7OmfN9c86Ze2bOvZex/3mAGv/RIU9xJCL2IWIdAS7C/Nyhtbm8l39XeVKfOrLcHZoOHmCA7zJkC6VdSmAQRoYBAHbCXZBzED726xKT0kwgGnyUgpdI0JBEEMD4B+4dV3pU+9Mvyl4NMTZKAV5X7cl0APC5P127BqBNqBwuJ5Gw2G8NbmDIGEcQR+9/u6pAcg0ZYtiRaXCDT75rHnT0bjF0dZgJkLP3VEDVEakcj58ti7MBJOWrPFUHJurUuaGbCVCd5llBdQ4Yw7GnUaM9Fal4JjptJCGGmQA964upnPBXHCYOTSciDMGcp1qnYpzBBXVu6LEEGHxOByViJURJX7m2+W+qmKax3cn4Kk/qdJgnnXOdHXIupZnA/B1jw5TP+wzgngSpLEhX6ahLy/dKm5Su7WODBK4l/I60JZPkJ0DcuvxPLvxr5ZjXUAL45crchxD00A12OR3apTyv/67E7CQerndOztwto9uymPI1N2RwOcMwgBYorigah5qBsN36WVtCCZI9kqqu8Td0DG2mhlJKdb8JGvQOrV86YMevPDZagjpuQoFLqPY3gDtOjawvH7TjZpRAZeelesHwON3jQtUJtej2kdalu1RbZZe/QSB0U6L5ph0AObB9wy0Vn5m2qJI2geWd19yI09eo8SywLjbmdMgaRjZ4+gx9RffV13BGD1BXNV5kCYMzrW641dOvAnGnVgVMHYLUPu2DGxxk4iPJFeFwfbLgL7lcfCi5UqZNgK7WIkm2k4AxHARLyaUSJuBpE6AtBuwCmzaAGM5Tc6neMW7UQdoEcnOdv9Cpv24GjFNAAPCvpalwTuFP1J5vy7kqqRtGOGjfqDZDT5vAQNPbzzTgzQmOAWZotXe4xXNeOj3T9OYTjUMzHU1Le4YQImwdaimndh8/0t4CSV/T83fR1PRUI9W8lALc4jla3x/ryv6UuCqrvh+bp+t6IwL81weQn6abMqFyZnX5BDIugVyQifT52hxD7HyVAFFKb8nreVg46K354bHd2qwn0H6u9i0dI9S2scIMSN8YHHDjnmrfz6YtqmQ1gZ7xxpyJ+5MX6ROYDqplADzPAc2zs/rXv1Qk7TVUyen0iclHDbbBjYWIc3UR3mb1kdUEQGC5NYA6p1dzAp7VBKjulgakhjf+sqwNKoNOGO8i9Uxz8H6KEkzKAvzRimX1Cex+58w/9O2/nT4S4v7/jKDUyo/vrfZ1WxPI6i2Qzvf/VrtKRMJbKewSeiI3aJcn96w++53EVfkCw79XQZYr/EsAAAAASUVORK5CYII="
          // },
          {
            image: logo || getBase64Image(tenantId) || defaultLogo,
            // width: 50,
            margin: [10, 10],
            fit: [50,50],
            //width: 50,
            //margin: [10, 10]
          },
          {
            text: headerDetails?.[0]?.header, //"Amritsar Municipal Corporation",
            margin: [40, 10, 2, 4],
            style: "header",
            // italics: true, 
            fontSize: 18,
            bold: true
          },
          {
            text: headerDetails?.[0]?.typeOfApplication, //"New Sewerage Connection",
            bold: true,
            fontSize: 16,
            alignment: "right",
            margin: [-40, 10, 2, 0],
            color: "#F47738"
          }
        ],
        [
          { text: "" },
          {
            text: headerDetails?.[0]?.subHeader, //"Municipal Corporation Amritsar, Town Hall, Amritsar, Punjab.",
            margin: [40, -45, -2, -5],
            style: "header",
            // italics: true, 
            fontSize: 10,
            // bold: true
          },

          {
            text: headerDetails?.[0]?.date, //"28/03/2022",
            bold: true,
            fontSize: 16,
            margin: [0, -50, 10, 0],
            alignment: "right",
            color: "#F47738"
          }
        ],
        [
          { text: "" },

          {
            text: headerDetails?.[0]?.description, //"0183-2545155 | www.amritsarcorp.com | cmcasr@gmail.com",
            margin: [40, -40, 2, 10],
            style: "header",
            // italics: true, 
            fontSize: 10,
            // bold: true
          },
          {
            text: "",
          }
        ]
      ]
    }
  });
  headerDetails?.[0]?.values?.forEach((header, index) => {
    headerData.push({
      style: 'tableExample',
      layout: "noBorders",
      fillColor: "#f7e0d4",
      "margin": [-40, -40, -40, 20],
      table: {
        widths: ['30%', '*'],
        body: [
          [
            {
              text: header?.title,
              margin: index == 0 ? [40, 0, 2, 10] : [40, 10, 2, 10],
              style: "header",
              fontSize: 10,
              bold: true
            },
            {
              text: header?.value,
              // bold: true,
              fontSize: 10,
              alignment: "left",
              margin: index == 0 ? [0, 0, 2, 10] : [0, 10, 2, 10],
            }
          ]
        ]
      }
    })
  })

  return headerData;
}


function createContent(details, phoneNumber, breakPageLimit = null) {
  const data = [];

  details.forEach((detail, index) => {
    if (detail?.values?.length > 0) {
      let column1 = [];
      let column2 = [];

      if ( breakPageLimit ?  (index + 1) % breakPageLimit === 0 : (index + 1) % 7 === 0) {
        data.push({
          text: "",
          margin: [-25, 0, 0, 200],
        });
      }

      data.push({
        text: `${detail.title}`,
        font: "Hind",
        fontSize: 18,
        // bold: true,
        margin: [-25, 20, 0, 20],
      });

      const newArray = [];
      let count = 0;
      let arrayNumber = 0;

      detail.values.forEach((value, index) => {
        if (count <= 3) {
          if (!newArray[arrayNumber]) {
            newArray[arrayNumber] = [];
          }
          if (value) {
            newArray[arrayNumber].push(value);
          }
          count++;
        }
        if (count === 4) {
          count = 0;
          arrayNumber++;
        }
      });

      newArray.forEach((value) => {
        if (value?.length === 2) {
          createContentForDetailsWithLengthOfTwo(value, data, column1, column2, detail.values.length > 3 ? 10 : 0);
        } else if (value?.length === 1 || value?.length === 3) {
          createContentForDetailsWithLengthOfOneAndThree(value, data, column1, column2, detail.values.length > 3 ? 10 : 0);
        } else {
          value.forEach((value, index) => {
            let margin = [-25, 0, 0, 5];
            if (index === 1) margin = [15, 0, 0, 5];
            if (index === 2) margin = [26, 0, 0, 5];
            if (index === 3) margin = [30, 0, 0, 5];
            column1.push({
              text: value.title,
              font: "Hind",
              fontSize: 11,
              // bold: true,
              margin,
            });
            if (index === 1) margin = [15, 0, 0, 10];
            if (index === 2) margin = [26, 0, 0, 10];
            if (index === 3) margin = [30, 0, 0, 10];
            column2.push({
              text: value.value,
              font: "Hind",
              fontSize: 9,
              margin,
              color: "#1a1a1a",
              width: "25%",
            });
          });
          data.push({ columns: column1 });
          data.push({ columns: column2 });
          column1 = [];
          column2 = [];
        }
      });
    }
  });

  return data;
}

function createContentForDetailsWithLengthOfTwo(values, data, column1, column2, num = 0) {
  values.forEach((value, index) => {
    if (index === 0) {
      column1.push({
        text: value.title,
        font: "Hind",
        fontSize: 12,
        // bold: true,
        margin: [-25, num - 10, -25, 0],
      });
      column2.push({
        text: value.value,
        font: "Hind",
        fontSize: 9,
        margin: [-25, 5, 0, 0],
        color: "#1a1a1a",
        width: "25%",
      });
    } else {
      column1.push({
        text: value.title,
        font: "Hind",
        fontSize: 12,
        // bold: true,
        margin: [-115, num - 10, -115, 0],
      });
      column2.push({
        text: value.value,
        font: "Hind",
        fontSize: 9,
        margin: [15, 5, 0, 0],
        color: "#1a1a1a",
        width: "25%",
      });
    }
  });
  data.push({ columns: column1 });
  data.push({ columns: column2 });
}

function createContentForDetailsWithLengthOfOneAndThree(values, data, column1, column2, num = 0) {
  values.forEach((value, index) => {
    if (index === 0) {
      column1.push({
        text: value.title,
        font: "Hind",
        fontSize: 12,
        // bold: true,
        margin: values.length > 1 ? [-25, -5, 0, 0] : [-25, 0, 0, 0],
      });
      column2.push({
        text: value.value,
        font: "Hind",
        fontSize: 9,
        color: "#1a1a1a",
        margin: values.length > 1 ? [-25, 5, 0, 0] : [-25, 5, 0, 0],
        width: "25%",
      });
    } else if (index === 2) {
      column1.push({
        text: value.title,
        font: "Hind",
        fontSize: 12,
        // bold: true,
        margin: [-60, -5, 0, 0],
      });
      column2.push({
        text: value.value,
        font: "Hind",
        fontSize: 9,
        margin: [26, 5, 0, 0],
        color: "#1a1a1a",
        width: "25%",
      });
    } else {
      column1.push({
        text: value.title,
        font: "Hind",
        fontSize: 12,
        // bold: true,
        margin: [-28, -5, 0, 0],
      });
      column2.push({
        text: value.value,
        font: "Hind",
        fontSize: 9,
        margin: [15, 5, 0, 0],
        color: "#1a1a1a",
        width: "25%",
      });
    }
  });
  data.push({ columns: column1 });
  data.push({ columns: column2 });
}

// EXAMPLE
// <button
//   onClick={() =>
//     Digit.Utils.pdf.generate({
//       logo:
//         "data:image/jpeg;base64,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",
//       name: "Berhampur Municipal Council",
//       email: "care@berhampur.gov.in",
//       phoneNumber: "080-454234",
//       heading: "Desludging request - Acknowledgement",
//       details: [
//         {
//           title: "Application Details",
//           values: [
//             { title: "Application No.", value: "FSM-277373" },
//             { title: "Application Date", value: "12/08/2020" },
//             { title: "Application Channel", value: "Counter" },
//           ],
//         },
//         {
//           title: "Applicant Details",
//           values: [
//             { title: "Applicant Name", value: "Satinder Pal Singh" },
//             { title: "Mobile No.", value: "2272773737" },
//           ],
//         },
//         {
//           title: "Property Details",
//           values: [
//             { title: "Property Type", value: "Commercial" },
//             { title: "Property Sub Type", value: "Mail" },
//           ],
//         },
//         {
//           title: "Property Location Details",
//           values: [
//             { title: "Pincode", value: "234678" },
//             { title: "City", value: "Berhampur" },
//             { title: "Mohall", value: "Alakapuri" },
//             { title: "Street", value: "Alakapuri Street" },
//             { title: "Building No.", value: "707/B" },
//             { title: "Landmark", value: "Behind SBI bank" },
//           ],
//         },
//         {
//           title: "Pit/Septic Tank Details",
//           values: [
//             { title: "Dimension", value: "2m x 2m x 3m" },
//             { title: "Distance from Road", value: "500m" },
//             { title: "No. of Trips", value: "1" },
//             { title: "Amount per Trip", value: " 1000.00" },
//             { title: "Total Amount Due", value: " 1000.00" },
//           ],
//         },
//       ],
//     })
//   }
// >
//   Download PDF
// </button>,

const downloadPdf = (blob, fileName) => {
  if (window.mSewaApp && window.mSewaApp.isMsewaApp() && window.mSewaApp.downloadBase64File) {
    var reader = new FileReader();
    reader.readAsDataURL(blob);
    reader.onloadend = function () {
      var base64data = reader.result;
      window.mSewaApp.downloadBase64File(base64data, fileName);
    };
  } else {
    const link = document.createElement("a");
    // create a blobURI pointing to our Blob
    link.href = URL.createObjectURL(blob);
    link.download = fileName;
    // some browser needs the anchor to be in the doc
    document.body.append(link);
    link.click();
    link.remove();
    // in case the Blob uses a lot of memory
    setTimeout(() => URL.revokeObjectURL(link.href), 7000);
  }
};

/* Download Receipts */

export const downloadReceipt = async (
  consumerCode,
  businessService,
  pdfKey = "consolidatedreceipt",
  tenantId = Digit.ULBService.getCurrentTenantId(),
  receiptNumber = null
) => {
  const response = await Digit.ReceiptsService.receipt_download(businessService, consumerCode, tenantId, pdfKey, receiptNumber);
  const responseStatus = parseInt(response.status, 10);
  if (responseStatus === 201 || responseStatus === 200) {
    let filename = receiptNumber ? `receiptNumber-${receiptNumber}.pdf` : `consumer-${consumerCode}.pdf`;
    downloadPdf(new Blob([response.data], { type: "application/pdf" }), filename);
  }
};
/* Download Bills */

export const downloadBill = async (
  consumerCode,
  businessService,
  pdfKey = "consolidatedbill",
  tenantId = Digit.ULBService.getCurrentTenantId(),
) => {
  const response = await Digit.ReceiptsService.bill_download(businessService, consumerCode, tenantId, pdfKey);
  const responseStatus = parseInt(response.status, 10);
  if (responseStatus === 201 || responseStatus === 200) {
    let filename = consumerCode ? `consumerCode-${consumerCode}.pdf` : `consumer-${consumerCode}.pdf`;
    downloadPdf(new Blob([response.data], { type: "application/pdf" }), filename);
  }
};

export const getFileUrl = (linkText = "") => {
  const linkList = (linkText && typeof linkText == "string" && linkText.split(",")) || [];
  let fileURL = "";
  linkList &&
    linkList.map((link) => {
      if (!link.includes("large") && !link.includes("medium") && !link.includes("small")) {
        fileURL = link;
      }
    });
  return fileURL;
};

/* Use this util function to download the file from any s3 links */
export const downloadPDFFromLink = async (link, openIn = "_blank") => {
  var response = await fetch(link, {
    responseType: "arraybuffer",
    headers: {
      "Content-Type": "application/json",
      Accept: "application/pdf",
    },
    method: "GET",
    mode: "cors",
  }).then((res) => res.blob());
  if (window.mSewaApp && window.mSewaApp.isMsewaApp() && window.mSewaApp.downloadBase64File) {
    var reader = new FileReader();
    reader.readAsDataURL(response);
    reader.onloadend = function () {
      var base64data = reader.result;
      window.mSewaApp.downloadBase64File(base64data, decodeURIComponent(link.split("?")[0].split("/").pop().slice(13)));
    };
  } else {
    var a = document.createElement("a");
    document.body.appendChild(a);
    a.style = "display: none";
    let url = window.URL.createObjectURL(response);
    a.href = url;
    a.download = decodeURIComponent(link.split("?")[0].split("/").pop().slice(13));
    a.click();
    window.URL.revokeObjectURL(url);
  }
};
